(function(){!function(){var e,n,t,r,o,i,l,c,a,u,s,d,f,g,m,p,_,h;return i="relate_entry",(n=document.getElementById(i))?(a=n.attributes,l=parseInt(a.getNamedItem("data-limit-suggestions").textContent,10)||4,c=a.getNamedItem("data-title-suggestions").textContent||"あわせて読みたい",r=!0,t=!0,o=!0,e=window.location.origin,google.load("feeds","1"),s=function(e){var n,t,r;return n=document.getElementById(i),r=function(){var e,n,r,o;for(r=document.querySelectorAll(".categories a"),o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.textContent);return o}().map(function(n){return'<option value="'+n+'" '+(n===e?"selected":void 0)+" >"+n+"</option>"}),n.innerHTML=' <div class="cina--reccomend__title--wrapper">\n  <h3 class="cina--reccomend__title">'+c+'</h3>\n  <div class="cina--reccomend__category--dd-widget">\n    <label for="cina--categories__select">カテゴリー\n      <select id="cina--categories__select">\n      <option value="all">全て</option>\n      '+r.join("")+'\n      </select>\n    </label>\n    <button class="cina--reccomend__refresh-button btn">更新</button>\n  </div>\n</div>\n<ul class="cina--recommend__ul" style="padding-left:0;">\n</ul>'},u=function(){var e;return e=function(e){return"all"===e?_():h(e)},document.querySelector(".cina--reccomend__refresh-button").addEventListener("click",function(n){return e(document.querySelector("#cina--categories__select").value)}),document.querySelector("#cina--categories__select").addEventListener("change",function(n){var t;return t=n.target.value,e(t)})},p=function(){var e,n,t;return t=function(){var e,t,r,o;for(r=document.querySelectorAll(".categories a"),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push(n);return o}().sort(function(){return Math.random()-.5}),e=0===t.length?"":t[0].textContent,s(decodeURIComponent(e)),u(),h(e)},h=function(n){var t,r;return null==n&&(n=""),t=e+"/rss/category/"+encodeURIComponent(n),r=new google.feeds.Feed(t),r.setNumEntries(20),r.load(function(e){return e.error||0===e.feed.entries.length?void 0:g(e.feed.entries)})},_=function(){var n,t;return n=e+"/rss/category/",console.log(n),t=new google.feeds.Feed(n),t.setNumEntries(100),t.load(function(e){return e.error||0===e.feed.entries.length?void 0:(console.log(e.feed),g(e.feed.entries))})},google.setOnLoadCallback(p),g=function(e){var n,t,r;return r=window.location.href,t=e.filter(function(e){return e.link!==r}).sort(function(){return Math.random()-.5}).slice(0,l).map(f),n=document.querySelector(".cina--recommend__ul"),n.innerHTML=" "+t.join("")+" "},f=function(){return r?function(n){return'<li class="cina--recommend__li" style="list-style-type:none;">\n<p><iframe src="'+n.link.replace(e+"/entry/",e+"/embed/")+'" width="100%" height="190px" scrolling="no" frameborder="0"></iframe></p>\n</li>'}:function(e){return'<li class="cina--recommend__li" style="list-style-type:none;">\n<p><a href="'+e.link+'" rel="nofollow" target="_blank">'+e.title+"</a>\n"+d(e.link)+"\n"+m(e.link)+"\n</p>\n</li>"}}(),d=function(){return t?function(e){return'<a href="http://b.hatena.ne.jp/entry/'+e+'" rel="nofollow" target="_blank">\n<img src="http://b.hatena.ne.jp/entry/image/'+e+'" style="opacity:0.8" />\n</a>'}:function(e){return""}}(),m=function(){return o?function(e){return' <a href="http://tweetbuzz.jp/redirect?url='+e+'" rel="nofollow" target="_blank">\n<img src="http://tools.tweetbuzz.jp/imgcount?url='+e+'" />\n</a>'}:function(e){return""}}()):void 0}()}).call(this);